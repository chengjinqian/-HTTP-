1.TIME_WAIT累积与端口耗尽

当某个TCP端点关闭TCP连接时，会在内存中维护一个小的控制块，用来记录最近关闭连接的IP地址和端口号，这类信息持续的时间为2MSL，以确保在这段时间内不会创建具有相同地址和端口号的新连接。客户端每次连接到服务器上时，都会获得一个新的源端口，以实现连接的唯一性，但由于可用端口数量有限，例如60000个，而且在2MSL内连接是无法重用的。

要修正这个问题，可以增加客户端敷在省城机器的数量，或者确保客户端和服务器在循环使用几个虚拟IP地址以增加更多的连接组合。


**HTTP连接的处理**

1.Connection首部

在某些情况下，两个相邻的HTTP应用程序会为它们共享的连接应用一组选项，HTTP的Connection首部字段中有一个由逗号分隔的连接标签列表，这些标签为此连接指定了一些不会传播到其他连接中去的选项，即在报文转发之前，必须删除Connection首部列出的所有首部字段。

应用程序在接收到一条带有Connection首部的报文时，接收端会解析发送端请求的所有选项，将其应用，然后会在将此报文转发给下一跳地址之前，删除Connection首部及Connection中所列出的所有首部。

2.串行事务处理时延

![](http://or155uq3h.bkt.clouddn.com/%E4%B8%B2%E8%A1%8C%E4%BA%8B%E5%8A%A1.png)

2.1 并行连接

HTTP允许客户端打开多条连接，并行执行多个HTTP事务，但是并行连接的性能取决于带宽及自身内存资源

2.2 持久连接
